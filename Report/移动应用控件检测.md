#### 移动应用控件检测（小黄鸭你听好）

##### 11.16

能做多少做多少吧

今天先来解析json

bound应该是bounding-box边框的一些参数，

bound[b_x, b_y, b_w, b_h]

(b_x, b_y)是控件边框的左上角坐标

b_w是控件边框的宽，b_h是高

屏幕尺寸是1440*2560.

截图的尺寸是1920*1080.

数据集的readme说图像需要进行缩放，具体什么意思我就不知道了

基本的结构是activity-root-childrens

root一般是PhoneWindow$DecorView

childrens里是屏幕中所有控件，里面有layout或者导航条，layout里有控件，以此类推，递归

我要做的是把所有的控件读出来（要不要包含layout?）然后如果有childrens就递归吧

然后怎么检查呢

能不能就在截图上画框框啊

用读出来的bounds的数据？

然后看框框是不是很好的框住了控件

这是人写的作业吗？！

遍历树（DFS）的时候先看class，如果是一些不会有childrens的（例如viewstub）就不用判断了免得报错；如果是view类型就加一个resourceid，便于识别这是个什么玩意儿；如果是……

递归遍历方法的入口参数是个[ ]，便于递归的把childrens传进去

递归的时候记录一下上一个控件的bounds，如果完全一致就continue，如果大小差不多并且离的很近就也continue，这里的阈值需要不断调试。

```python
com.digitalchemy.foundation.android.advertising.c.a
```

这什么类？？反正这个类也会有childrens

我要把可以有childrens的类叫做母类！伟大的造物主wgg！

然后如果bounds和rel-bounds不一致就tm随便存一个好吧，存大的！然后如果b_h > 2560 - b_y 则 b_h = 2560 - b_y，这样框框就不会出界啦！

md有的有children有的没有这要怎么搞啊

哇我用try except解决了！！！！！！！！

我是什么小天才！！！夸！！！！！

（我疯了![img](file:///C:\Users\Lenovo\AppData\Local\Temp\SGPicFaceTpBq\23124\022DF93F.png)





